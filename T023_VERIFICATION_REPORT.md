# –û—Ç—á–µ—Ç –æ –ø—Ä–æ–≤–µ—Ä–∫–µ T023: –°–µ—Ä–≤–∏—Å —Ä–∞—Å—á—ë—Ç–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏

–î–∞—Ç–∞: 2025-10-23  
–°—Ç–∞—Ç—É—Å: ‚úÖ **–í–´–ü–û–õ–ù–ï–ù–û**

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ñ–∞–π–ª–æ–≤

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

1. ‚úÖ `app/core/pricing_rules.py` (221 —Å—Ç—Ä–æ–∫–∞)
   - Enums: ProductType, ServiceType
   - Dataclasses: TariffPlan, AdditionalService, PackageDiscount
   - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤—Å–µ—Ö —Ç–∞—Ä–∏—Ñ–æ–≤ (AI-Manager, AI-Lawyer, AI-Analyst)
   - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏
   - –ü–∞–∫–µ—Ç–Ω—ã–µ —Å–∫–∏–¥–∫–∏

2. ‚úÖ `app/services/pricing/calculator.py` (276 —Å—Ç—Ä–æ–∫)
   - PricingCalculator —Å –º–µ—Ç–æ–¥–∞–º–∏ —Ä–∞—Å—á—ë—Ç–∞
   - SelectedProduct, SelectedService
   - PricingResult —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º
   - Singleton: pricing_calculator

3. ‚úÖ `app/services/pricing/__init__.py`
   - –≠–∫—Å–ø–æ—Ä—Ç –ø—É–±–ª–∏—á–Ω–æ–≥–æ API

4. ‚úÖ `tests/unit/test_pricing_calculator.py` (208 —Å—Ç—Ä–æ–∫)
   - 11 unit-—Ç–µ—Å—Ç–æ–≤

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ—Å—Ç–æ–≤

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∑–∞–ø—É—Å–∫–∞:

```
============================= test session starts ==============================
collected 11 items

tests/unit/test_pricing_calculator.py::test_find_tariff_ai_manager PASSED [  9%]
tests/unit/test_pricing_calculator.py::test_find_tariff_by_users PASSED  [ 18%]
tests/unit/test_pricing_calculator.py::test_single_product_no_discounts PASSED [ 27%]
tests/unit/test_pricing_calculator.py::test_package_discount_digital_office PASSED [ 36%]
tests/unit/test_pricing_calculator.py::test_package_discount_full_automation PASSED [ 45%]
tests/unit/test_pricing_calculator.py::test_annual_payment_discount PASSED [ 54%]
tests/unit/test_pricing_calculator.py::test_startup_discount PASSED      [ 63%]
tests/unit/test_pricing_calculator.py::test_combined_discounts PASSED    [ 72%]
tests/unit/test_pricing_calculator.py::test_additional_services PASSED   [ 81%]
tests/unit/test_pricing_calculator.py::test_format_summary PASSED        [ 90%]
tests/unit/test_pricing_calculator.py::test_enterprise_tariff_warning PASSED [100%]

============================== 11 passed in 0.34s ==============================
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ **11/11 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ** (100%)

---

## ‚úÖ –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç 1: –ü—Ä–æ—Å—Ç–æ–π —Ä–∞—Å—á—ë—Ç –±–µ–∑ —Å–∫–∏–¥–æ–∫

**–°—Ü–µ–Ω–∞—Ä–∏–π:** AI-Manager –ë–∏–∑–Ω–µ—Å, 12 –º–µ—Å—è—Ü–µ–≤

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
üí∞ –†–ê–°–ß–Å–¢ –°–¢–û–ò–ú–û–°–¢–ò

üì¶ –ü—Ä–æ–¥—É–∫—Ç—ã:
  ‚Ä¢ ai_manager (–ë–∏–∑–Ω–µ—Å): 150 000‚ÇΩ/–º–µ—Å √ó 12 –º–µ—Å
–ò—Ç–æ–≥–æ –∑–∞ –ø—Ä–æ–¥—É–∫—Ç—ã: 1 800 000‚ÇΩ

üíµ –ò–¢–û–ì–û:
–ï–∂–µ–º–µ—Å—è—á–Ω–æ: 150 000‚ÇΩ
–ó–∞ –≥–æ–¥: 1 800 000‚ÇΩ
```

‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

### –¢–µ—Å—Ç 2: –ü–∞–∫–µ—Ç "–ü–æ–ª–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è" + –ì–æ–¥–æ–≤–∞—è –æ–ø–ª–∞—Ç–∞ + –£—Å–ª—É–≥–∏

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
- AI-Manager –ë–∏–∑–Ω–µ—Å
- AI-Lawyer –ö–æ–º–∞–Ω–¥–∞
- AI-Analyst –°—Ç–∞–Ω–¥–∞—Ä—Ç
- –í–Ω–µ–¥—Ä–µ–Ω–∏–µ (1 —Ä–∞–∑)
- –ì–æ–¥–æ–≤–∞—è –æ–ø–ª–∞—Ç–∞

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
üí∞ –†–ê–°–ß–Å–¢ –°–¢–û–ò–ú–û–°–¢–ò

üì¶ –ü—Ä–æ–¥—É–∫—Ç—ã:
  ‚Ä¢ ai_manager (–ë–∏–∑–Ω–µ—Å): 150 000‚ÇΩ/–º–µ—Å √ó 12 –º–µ—Å
  ‚Ä¢ ai_lawyer (–ö–æ–º–∞–Ω–¥–∞): 100 000‚ÇΩ/–º–µ—Å √ó 12 –º–µ—Å
  ‚Ä¢ ai_analyst (–°—Ç–∞–Ω–¥–∞—Ä—Ç): 120 000‚ÇΩ/–º–µ—Å √ó 12 –º–µ—Å
–ò—Ç–æ–≥–æ –∑–∞ –ø—Ä–æ–¥—É–∫—Ç—ã: 4 440 000‚ÇΩ

üõ† –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏:
  ‚Ä¢ –í–Ω–µ–¥—Ä–µ–Ω–∏–µ: 80 000‚ÇΩ √ó 1
–ò—Ç–æ–≥–æ –∑–∞ —É—Å–ª—É–≥–∏: 80 000‚ÇΩ

üéÅ –°–∫–∏–¥–∫–∏:
  ‚Ä¢ –ü–∞–∫–µ—Ç '–ü–æ–ª–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è': -20% (888 000‚ÇΩ)
  ‚Ä¢ –ì–æ–¥–æ–≤–∞—è –æ–ø–ª–∞—Ç–∞: -15% (532 800‚ÇΩ)
–í—Å–µ–≥–æ —Å–∫–∏–¥–∫–∞: 1 420 800‚ÇΩ

üíµ –ò–¢–û–ì–û:
–ï–∂–µ–º–µ—Å—è—á–Ω–æ: 251 600‚ÇΩ
–ó–∞ –≥–æ–¥: 3 019 200‚ÇΩ
–° —É—Å–ª—É–≥–∞–º–∏: 3 099 200‚ÇΩ
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏:**
- –ë–∞–∑–æ–≤–∞—è: (150k + 100k + 120k) √ó 12 = 4,440,000‚ÇΩ ‚úÖ
- –ü–∞–∫–µ—Ç -20%: 888,000‚ÇΩ ‚úÖ
- –ü–æ—Å–ª–µ –ø–∞–∫–µ—Ç–∞: 3,552,000‚ÇΩ
- –ì–æ–¥–æ–≤–∞—è -15%: 532,800‚ÇΩ ‚úÖ
- –ò—Ç–æ–≥–æ: 3,019,200‚ÇΩ ‚úÖ
- –° —É—Å–ª—É–≥–∞–º–∏: 3,019,200‚ÇΩ + 80,000‚ÇΩ = 3,099,200‚ÇΩ ‚úÖ

‚úÖ –í—Å–µ —Ä–∞—Å—á—ë—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:

- ‚úÖ –ü–æ–∏—Å–∫ —Ç–∞—Ä–∏—Ñ–∞ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
- ‚úÖ –ê–≤—Ç–æ–ø–æ–¥–±–æ—Ä —Ç–∞—Ä–∏—Ñ–∞ –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –†–∞—Å—á—ë—Ç –±–∞–∑–æ–≤–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏
- ‚úÖ –ü–∞–∫–µ—Ç–Ω—ã–µ —Å–∫–∏–¥–∫–∏ (15-20%)
- ‚úÖ –ì–æ–¥–æ–≤–∞—è —Å–∫–∏–¥–∫–∞ (15%)
- ‚úÖ –°–∫–∏–¥–∫–∞ –¥–ª—è —Å—Ç–∞—Ä—Ç–∞–ø–æ–≤/–ù–ö–û (20%)
- ‚úÖ –ö–∞—Å–∫–∞–¥–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å–∫–∏–¥–æ–∫
- ‚úÖ –†–∞—Å—á—ë—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —É—Å–ª—É–≥
- ‚úÖ –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–≤–æ–¥–∫–∏
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ —ç–Ω—Ç–µ—Ä–ø—Ä–∞–π–∑ —Ç–∞—Ä–∏—Ñ–æ–≤
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–Ω—Ç–µ—Ä–∞

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** 1 warning (Import "loguru" could not be resolved)
- –≠—Ç–æ –ª–æ–∂–Ω–æ–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–µ IDE, –º–æ–¥—É–ª—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## üìä –ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞

| –ö—Ä–∏—Ç–µ—Ä–∏–π | –°—Ç–∞—Ç—É—Å | –û—Ü–µ–Ω–∫–∞ |
|----------|--------|--------|
| –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ | ‚úÖ –°–æ–∑–¥–∞–Ω–æ | 100% |
| Unit-—Ç–µ—Å—Ç—ã | ‚úÖ 11/11 –ø—Ä–æ–π–¥–µ–Ω–æ | 100% |
| –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å | ‚úÖ –ü–æ–ª–Ω–∞—è | 100% |
| –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ —Ä–∞—Å—á—ë—Ç–æ–≤ | ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞ | 100% |
| –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | 100% |
| –¢–∏–ø–∏–∑–∞—Ü–∏—è | ‚úÖ –í–µ–∑–¥–µ | 100% |

**–û–ë–©–ê–Ø –û–¶–ï–ù–ö–ê: 100%** ‚úÖ

---

## üéØ –ß—Ç–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

1. –î–æ–±–∞–≤–∏—Ç—å —ç–∫—Å–ø–æ—Ä—Ç –≤ JSON/dict –¥–ª—è API
2. –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
3. –î–æ–±–∞–≤–∏—Ç—å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞—Å—á—ë—Ç–æ–≤
4. –î–æ–±–∞–≤–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ü–µ–Ω

---

## ‚úÖ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–ó–∞–¥–∞—á–∞ T023 –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –Ω–∞ 100%**

–°–µ—Ä–≤–∏—Å —Ä–∞—Å—á—ë—Ç–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω:
- ‚úÖ –í—Å–µ —Ñ–∞–π–ª—ã —Å–æ–∑–¥–∞–Ω—ã
- ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã
- ‚úÖ –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞
- ‚úÖ –ì–æ—Ç–æ–≤ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

**–§–∞–∑–∞ 4 (US3) –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –Ω–∞ 100%** (8/8 –∑–∞–¥–∞—á)

---

*–û—Ç—á—ë—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω: 2025-10-23 19:17*

